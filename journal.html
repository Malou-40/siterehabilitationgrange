<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Journal de Chantier - Réhabilitation de Grange</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Découvrez l'avancement du chantier de la réhabilitation de notre grange en maison, avec des photos avant/après et des récits détaillés jour par jour.">
  <meta name="keywords" content="réhabilitation, grange, chantier, rénovation, travaux, journal, transformation habitation">
  <meta name="author" content="Malou-40">
  <meta name="robots" content="index, follow">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Journal de Chantier - Réhabilitation de Grange">
  <meta property="og:description" content="Suivez l'évolution de la réhabilitation d'une grange en maison avec des étapes détaillées et des photos avant/après.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://malou-40.github.io/siterehabilitationgrange/journal.html">
  <meta property="og:image" content="https://malou-40.github.io/siterehabilitationgrange/images/apres1.jpg">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">

  <link rel="stylesheet" href="style.css" />

  <!-- OneSignal Push Notifications -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function(OneSignal) {
      await OneSignal.init({
        appId: "8e747613-7738-4803-b0d6-4a93750c7a6e"
      });
    });
  </script>
</head>
<body>
  <header>
    <h1>Journal de Chantier</h1>
    <nav>
      <ul class="menu">
        <li><a href="index.html">Accueil</a></li>
        <li><a href="photos.html">Avant / Après</a></li>
        <li><a href="journal.html">Journal</a></li>
        <li><a href="cagnotte.html">Cagnotte</a></li>
      </ul>
    </nav>
  </header>

  <section class="presentation">
    <h2>Suivi des travaux</h2>
    <p>Cette page permettra d'avoir un suivi régulier de l'évolution du chantier de la grange, à travers des récits et des photos d'étapes clés.</p>
  </section>

  <section class="journal">
    <article>
      <h3>24 avril 2025 – Renforcement de la toiture avec des bastaings : entre théorie et réalité</h3>
      <p>Pour consolider une poutre fragilisée par l’humidité et les infiltrations, nous avons dû relever la toiture existante à l’aide d’un cric. La poutre d’origine, abîmée par le temps et l’eau, menaçait la stabilité de la structure. Avec mon père, nous avons installé des bastaings pour assurer un bon renfort.
      On pensait que ce serait simple… mais en réalité, ça nous a pris 3 heures : la mise en pratique s’est révélée bien différente de ce qu’on avait imaginé en théorie !</p>
      <img src="avant.jpg" alt="Photo avant renforcement de la toiture" class="lightbox-trigger" data-full="20250424_105553.jpg" />
      <img src="après.jpg" alt="Photo après pose des bastaings pour la toiture" class="lightbox-trigger" data-full="20250424_131625.jpg" />
    </article>

    <article>
      <h3>25 avril 2025 – Installation des planches de rive et préparation pour la pose de la gouttière</h3>
      <p>Après avoir installé les planches de rive pour habiller et protéger les extrémités de la toiture, nous avons coupé les anciens poteaux qui dépassaient et gênaient. Cette étape était indispensable pour préparer correctement l'installation de la future gouttière, qui viendra bientôt en place pour assurer une bonne évacuation des eaux de pluie.</p>
      <img src="20250425_152023-redimensionner.jpg" alt="Planches de rive en cours d'installation" class="lightbox-trigger" data-full="20250425_152023.jpg" />
      <img src="20250427_134944-redimensionner.jpg" alt="Fin de la préparation pour pose de la gouttière" class="lightbox-trigger" data-full="20250427_134944.jpg" />
    </article>

    <article>
      <h3>29 avril 2025 – Pose de la gouttière : installation réussie avec contrôle de la pente</h3>
      <p>Après avoir préparé les planches de rive et dégagé les anciens poteaux de toiture, nous avons poursuivi notre chantier avec la pose de la gouttière.
Pour garantir un bon écoulement de l'eau de pluie, nous avons installé la gouttière en respectant une pente d'environ 7%, conformément aux recommandations pour une évacuation efficace.

La mise en place a nécessité plusieurs ajustements pour assurer une pente régulière sur toute la longueur. Nous avons pris soin de fixer les crochets en suivant une légère inclinaison, en contrôlant régulièrement à l’aide d’un cordeau tendu.

Une fois la gouttière complètement fixée, nous avons procédé à des tests avec de l’eau : nous avons versé un pichet pour simuler de la pluie. Résultat : l’eau s’écoule parfaitement, sans stagnation ni débordement !

En complément, pour optimiser l’écoulement en attendant la prochaine réfection complète de la toiture, nous avons découpé de petits morceaux de tuiles. Cela permet de guider correctement l’eau jusqu’à la gouttière, même avec la toiture actuelle, et d’éviter toute infiltration indésirable sur la structure.</p>
      <img src="20250429_115935-redimensionner.jpg" alt="Planches de rive en cours d'installation" class="lightbox-trigger" data-full="20250429_115935.jpg" />
      <img src="20250429_175706-redimensionner.jpg" alt="Planches de rive en cours d'installation" class="lightbox-trigger" data-full="20250429_175706.jpg" />
    </article>

    <article>
      <h3>30 avril 2025 – Pose de la toiture avant et raccordement des gouttières.</h3>
      <p>Nous avons terminé la pose de la toiture sur la façade avant de la grange, ce qui change complètement l’apparence du bâtiment.
Nous en avons profité pour relier les deux gouttières latérales à une seule descente, afin de simplifier l’évacuation de l’eau de pluie.

Comme souvent, il a fallu s’adapter : les poutres de soutien, mal ajustées lors de l’ancienne pose de panneaux solaires, nous empêchaient d’installer correctement les planches de rive.
On a donc dû retailler proprement les extrémités pour pouvoir finir le travail proprement.

Encore une belle étape de franchie dans ce chantier qui avance pas à pas !</p>
      <img src="20250430_103321-redimensionner.jpg" alt="Planches de rive en cours d'installation" class="lightbox-trigger" data-full="20250430_103321.jpg" />
      <img src="20250430_181257-redimensionner.jpg" alt="Fin de la préparation pour pose de la gouttière" class="lightbox-trigger" data-full="20250430_181257.jpg" />
    </article>
  </section>

  <footer>
    <p>&copy; 2025 - Réhabilitation de la Grange</p>
  </footer>

  <!-- GSAP + Script animation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    gsap.from("header h1", {
      y: -50,
      opacity: 0,
      duration: 1,
      ease: "power3.out"
    });

    gsap.utils.toArray("section, article").forEach(element => {
      gsap.from(element, {
        scrollTrigger: {
          trigger: element,
          start: "top 85%",
          toggleActions: "play none none none"
        },
        y: 50,
        opacity: 0,
        duration: 1,
        ease: "power2.out"
      });
    });
  </script>

  <!-- Lightbox HTML -->
  <div class="lightbox-overlay" id="lightbox">
    <img src="" alt="Agrandissement d'une photo du journal de chantier" />
  </div>

  <!-- Script Lightbox -->
  <script>
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = lightbox.querySelector('img');

    document.querySelectorAll('.lightbox-trigger').forEach(img => {
      img.addEventListener('click', () => {
        const fullImg = img.dataset.full;
        lightboxImg.src = fullImg;
        lightbox.style.display = 'flex';
      });
    });

    lightbox.addEventListener('click', () => {
      lightbox.style.display = 'none';
      lightboxImg.src = '';
    });
  </script>

<!-- Script abonnement OneSignal avec confirmation (corrigé pour OneSignal v16) -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const subscribeBtn = document.getElementById('subscribe-btn');
    const confirmationMessage = document.getElementById('confirmation-message');

    // Attend que OneSignal soit chargé et prêt
    function attendreOneSignalPret(callback) {
      const interval = setInterval(() => {
        if (
          window.OneSignal &&
          window.OneSignal.Notifications &&
          typeof window.OneSignal.Notifications.showSlidedownPrompt === 'function'
        ) {
          clearInterval(interval);
          callback();
        }
      }, 300);
    }

    attendreOneSignalPret(() => {
      // Active le bouton une fois OneSignal prêt
      subscribeBtn.disabled = false;

      subscribeBtn.addEventListener('click', () => {
        window.OneSignal.Notifications.showSlidedownPrompt()
          .then(() => {
            if (confirmationMessage) {
              confirmationMessage.style.display = 'block';
            }
          })
          .catch((err) => {
            console.error("Erreur OneSignal :", err);
            alert("Une erreur est survenue. Veuillez réessayer plus tard.");
          });
      });
    });
  });
</script>

</body>
</html>
